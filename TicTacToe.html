<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tic tac toe</title>

    <style>
        #carogame{
            width: 100px;
            height: 100px  ;
        }
    </style>
</head>
<body>
<h3>Caro Game</h3>
<p id="carogame"/>
<input type="button" value="Change Value" onclick="changeValue()">
<br><br>
<p id="result"></p>
<script>
    let b= document.getElementById("carogame")
    let board= []
    let data= ""
    let change= 0

    for (let i=0; i<3; i++){
        board[i]= new Array(".",".",".")
    }

    for (let i=0; i<3; i++){
        data += "<br/>"
        for (let j=0; j<3; j++){
            data+= board[i][j] + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
        }

    }
    data += "<br/><br/><input type='button' value='Change Value' onclick='changeValue()'>"
    b.innerHTML = data;

    function changeValue() {
        let positionX = parseInt(prompt("Enter X: "))
        let positionY = parseInt(prompt("Enter Y: "))


        data = ""

        if (change == 0) {
            board[positionX][positionY] = "x"
            change += 1

        } else {
            board[positionX][positionY] = "o"
            change = 0
        }


        for (let i = 0; i < 3; i++) {
            data += "<br/>"
            for (let j = 0; j < 3; j++) {
                data += board[i][j] + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"

            }
        }
        data += "<br/><br/><input type='button' value='Change Value' onclick='changeValue()'>"
        b.innerHTML = "<hr/>" + data;

        check_board();
    }




        function check_board() {

            let winner = 0

            //Test rows
            for (let i = 0; i < board.length; i++) {
                for (let j = 0; j < board.length; j++) {
                    if (board[i][j] === board[i][j + 1] && board[i][j] === board[i][j + 2] && board[i][j] === "x") {
                        winner = 1
                        break;
                    } else if (board[i][j] === board[i][j + 1] && board[i][j] === board[i][j + 2] && board[i][j] === "o") {
                        winner = -1
                        break;
                    }
                }


                // Test column
                for (let i = 0; i < board.length; i++) {
                    for (let j = 0; j < board.length; j++) {
                        if (board[i][j] === board[i + 1][j] && board[i][j] === board[i + 2][j] && board[i][j] === "x") {
                            winner = 1
                            break;
                        } else if (board[i][j] === board[i + 1][j] && board[i][j] === board[i + 2][j] && board[i][j] === "o") {
                            winner = -1
                            break;
                        }
                    }

                    // Test cross
                    for (let i = 0; i < board.length; i++) {
                        for (let j = 0; j < board.length; j++) {
                            if (board[i][j] === board[i + 1][j + 1] && board[i][j] === board[i + 2][j + 2] && board[i][j] === "x") {
                                winner = 1
                                break;
                            } else if (board[i][j] === board[i + 1][j + 1] && board[i][j] === board[i + 2][j + 2] && board[i][j] === "o") {
                                winner = -1
                                break;

                            }
                        }

                        //  Test cross nguoc
                        for (let i = 0; i < board.length; i++) {
                            for (let j = 0; j < board.length; j++) {
                                if (board[i][j] === board[i][j + 2] && board[i][j] === board[i + 1][j + 1] && board[i][j] === "x") {
                                    winner = 1
                                    break;
                                } else if (board[i][j] === board[i ][j + 2] && board[i][j] === board[i + 1][j + 1] && board[i][j] === "o") {
                                    winner = -1
                                    break;
                                }

                                //Print result
                                if (winner === 1) {
                                    document.getElementById("result").innerHTML = "Player 1 WON!"
                                } else if (winner === -1) {
                                    document.getElementById("result").innerHTML = "Player 2 WON!"
                                }


                            }


                        }
                    }
                }
            }
        }





    </script>
</body>
</html>